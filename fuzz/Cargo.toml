[package]
name = "descriptor-fuzz"
edition = "2021"
rust-version = "1.63.0"
version = "0.0.1"
authors = ["Generated by fuzz/generate-files.sh"]
publish = false

[package.metadata]
cargo-fuzz = true

[dependencies]
libfuzzer-sys = "0.4"
# We shouldn't need an explicit version on the next line, but Andrew's tools
# choke on it otherwise. See https://github.com/nix-community/crate2nix/issues/373
miniscript = { path = "..", features = [ "compiler" ], version = "13.0" }
old_miniscript = { package = "miniscript", features = [ "compiler" ], version = "12.3" }

regex = "1.0"

[lints.rust]
unexpected_cfgs = { level = "warn", check-cfg = ['cfg(fuzzing)'] }

[[bin]]
name = "compile_descriptor"
path = "fuzz_targets/compile_descriptor.rs"

[[bin]]
name = "compile_taproot"
path = "fuzz_targets/compile_taproot.rs"

[[bin]]
name = "miniscript_satisfy"
path = "fuzz_targets/miniscript_satisfy.rs"

[[bin]]
name = "parse_descriptor"
path = "fuzz_targets/parse_descriptor.rs"

[[bin]]
name = "parse_descriptor_definite"
path = "fuzz_targets/parse_descriptor_definite.rs"

[[bin]]
name = "parse_descriptor_priv"
path = "fuzz_targets/parse_descriptor_priv.rs"

[[bin]]
name = "parse_descriptor_secret"
path = "fuzz_targets/parse_descriptor_secret.rs"

[[bin]]
name = "regression_compiler"
path = "fuzz_targets/regression_compiler.rs"

[[bin]]
name = "regression_descriptor_parse"
path = "fuzz_targets/regression_descriptor_parse.rs"

[[bin]]
name = "regression_taptree"
path = "fuzz_targets/regression_taptree.rs"

[[bin]]
name = "roundtrip_concrete"
path = "fuzz_targets/roundtrip_concrete.rs"

[[bin]]
name = "roundtrip_descriptor"
path = "fuzz_targets/roundtrip_descriptor.rs"

[[bin]]
name = "roundtrip_miniscript_script"
path = "fuzz_targets/roundtrip_miniscript_script.rs"

[[bin]]
name = "roundtrip_miniscript_script_tap"
path = "fuzz_targets/roundtrip_miniscript_script_tap.rs"

[[bin]]
name = "roundtrip_miniscript_str"
path = "fuzz_targets/roundtrip_miniscript_str.rs"

[[bin]]
name = "roundtrip_semantic"
path = "fuzz_targets/roundtrip_semantic.rs"
